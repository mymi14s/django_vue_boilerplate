{"version":3,"file":"Login2.js","sources":["../../../frontend/src/stores/session.js","../../../frontend/src/views/auth/Login.vue"],"sourcesContent":["import { defineStore } from 'pinia'\n\nexport const useSessionStore = defineStore('session', {\n  state: () => ({\n    user: null,\n    is_authenticated: null,\n    token: null,\n    setting: null\n  }),\n  actions: {\n    setUser(user) {\n        console.log(user)\n      this.user = user.user;\n      this.is_authenticated = user.is_authenticated;\n    },\n    setToken(token) {\n      this.token = token\n    },\n    setSetting(setting) {\n      this.setting = setting\n    },\n    clearSession() {\n      this.user = null\n      this.token = null\n    },\n     persist: true\n  }\n})\n","<script>\nimport { useSessionStore } from '@/stores/session'\n\nconst session = useSessionStore()\n\nexport default {\n  name: 'Login',\n\n  // Component data\n  data() {\n    return {\n      message: 'Hello Vue!',\n      count: 0,\n      email: \"\",\n      password: \"\",\n    };\n  },\n\n  // Props received from parent\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    isVisible: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  // Computed properties\n  computed: {\n    reversedMessage() {\n      return this.message.split('').reverse().join('');\n    },\n  },\n\n  // Methods (event handlers, business logic)\n  methods: {\n    async login() {\n      let data = await this.$brigantes.login(this.email, this.password);\n      if (data.token) {\n        this.$router.push('/');\n      }\n    },\n\n  },\n\n  // Watchers for reactive changes\n  watch: {\n    count(newVal, oldVal) {\n      console.log(`Count changed from ${oldVal} to ${newVal}`);\n    },\n  },\n\n  // Lifecycle hooks\n  beforeCreate() {\n    console.log('beforeCreate');\n  },\n  created() {\n    console.log('created');\n  },\n  beforeMount() {\n    console.log('beforeMount');\n  },\n  beforeUpdate() {\n    console.log('beforeUpdate');\n  },\n  updated() {\n    console.log('updated');\n  },\n  beforeUnmount() {\n    console.log('beforeUnmount');\n  },\n  unmounted() {\n    console.log('unmounted');\n  },\n\n  // Components used inside this component\n  components: {\n    // ExampleChildComponent\n  },\n\n  // Custom directives used in this component\n  directives: {\n    // ExampleDirective\n  },\n\n  // Provide/inject (for dependency injection)\n  provide() {\n    return {\n      someService: this.someService,\n    };\n  },\n  inject: ['someService'],\n\n  // Template render function (optional alternative to <template>)\n  // render(h) {\n  //   return h('div', this.message);\n  // },\n\n  // Mixins (shared functionality)\n  mixins: [\n    // someMixin\n  ],\n\n  // Emits (declare custom events)\n  emits: ['update', 'submit'],\n\n  // Template refs\n  mounted() {\n    this.$refs.myRef?.focus();\n    this.$brigantes.getCSRFToken();\n    const is_authenticated = sessionStorage.getItem('is_authenticated');\n    if (is_authenticated && window.location.href.includes('/auth/login')){\n      router.push('/')\n    }\n  },\n};\n</script>\n\n\n\n\n\n<template>\n  <div class=\"wrapper min-vh-100 d-flex flex-row align-items-center\">\n    <CContainer>\n      <CRow class=\"justify-content-center\">\n        <CCol :md=\"6\" :lg=\"4\">\n          <CCardGroup>\n            <CCard class=\"p-4\">\n              <CCardBody>\n                <CForm class=\"form-horizontal\" @submit.prevent=\"login\">\n                  <div class=\"text-center mb-4\">\n                    <h2>Login</h2>\n                    <p class=\"text-body-secondary small mb-0\">Sign In to your account</p>\n                  </div>\n                  <CInputGroup class=\"mb-3\">\n                    <CInputGroupText>\n                      <CIcon icon=\"cil-user\" />\n                    </CInputGroupText>\n                    <CFormInput\n                      placeholder=\"Email\"\n                      autocomplete=\"email\"\n                      v-model=\"email\"\n                      type=\"email\"\n                      required\n                      size=\"sm\"\n                      @keydown.enter=\"login\"\n                    />\n                  </CInputGroup>\n                  <CInputGroup class=\"mb-3\">\n                    <CInputGroupText>\n                      <CIcon icon=\"cil-lock-locked\" />\n                    </CInputGroupText>\n                    <CFormInput\n                      type=\"password\"\n                      placeholder=\"Password\"\n                      autocomplete=\"current-password\"\n                      v-model=\"password\"\n                      size=\"sm\"\n                      @keydown.enter=\"login\"\n                    />\n                  </CInputGroup>\n                  <CRow class=\"align-items-center\">\n                    <CCol :xs=\"6\">\n                      <CButton color=\"primary\" class=\"px-3 py-2\" size=\"sm\" @click=\"login\"> \n                        Login \n                      </CButton>\n                    </CCol>\n                    <CCol :xs=\"6\" class=\"text-right\">\n                      <CButton color=\"link\" class=\"px-0 py-0\" size=\"sm\">\n                        Forgot password?\n                      </CButton>\n                    </CCol>\n                  </CRow>\n                </CForm>\n              </CCardBody>\n            </CCard>\n          </CCardGroup>\n        </CCol>\n      </CRow>\n    </CContainer>\n  </div>\n</template>"],"names":["useSessionStore","defineStore","user","token","setting","_sfc_main","__async","newVal","oldVal","_a","_hoisted_1","_openBlock","_createElementBlock","_createVNode","_component_CContainer","_component_CRow","_component_CCol","_component_CCardGroup","_component_CCard","_component_CCardBody","_component_CForm","$options","_createElementVNode","_component_CInputGroup","_component_CInputGroupText","_component_CIcon","_component_CFormInput","$data","$event","_component_CButton","_cache"],"mappings":"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"}